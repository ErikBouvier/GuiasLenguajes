===================
Guía de React by dM
===================

Introducción
============

React es una biblioteca Javascript de código abierto diseñada para crear
interfaces de usuario con el objetivo de facilitar el desarrollo de aplicaciones
en una sola página. Es mantenido por Facebook y la comunidad de software libre.
En el proyecto hay más de mil desarrolladores libres.

Declarativo
===========

React te ayuda a crear interfaces de usuario interactivas de forma sencilla.
Diseña vistas simples para cada estado en tu aplicación, y React se encargará de
actualizar y renderizar de manera eficiente los componentes correctos cuando los
datos cambien.

Las vistas declarativas hacen que tu código sea más predecible, por lo tanto,
fácil de depurar.

Basado en componentes
=====================

Crea componentes encapsulados que manejen su propio estado, y conviértelos en
interfaces de usuario complejas.

Ya que la lógica de los componentes está escrita en JavaScript y no en
plantillas, puedes pasar datos de forma sencilla a través de tu aplicación y
mantener el estado fuera del DOM.

Aprende una vez, escríbelo donde sea
====================================

En React no dejamos fuera al resto de tus herramientas tecnológicas, así que
podrás desarrollar nuevas características sin necesidad de volver a escribir el
código existente.

React puede también renderizar desde el servidor usando Node, así como
potencializar aplicaciones móviles usando React Native.

Componentes
===========

Los componentes permiten separar la interfaz de usuario en piezas independientes
reutilizables y pensar en cada pieza de forma aislada. Esta página proporciona
una introducción a la idea de los componentes.

==============================
Hello world en una página html
==============================

<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Hello world!</title>
    <!-- Load React. -->
    <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>
<body>
  <div id="root"></div>
  <div id="box"></div>
  <script type="text/babel">
  ReactDOM.render(
    <h1>Hello React!</h1>,
    document.getElementById('box')
  );

  // Another example

  class Hello extends React.Component {
    render() {
      return <h1>Hello World!</h1>
    }
  }
  ReactDOM.render(<Hello />, document.getElementById('root'))

  </script>
</body>
</html>

===============================
Ejemplo de llamar un componente
===============================

En esta sección, vamos a mostrarte como agregar un componente de React a una
página HTML existente. Puedes seguir los pasos en tu sitio web, o crear un nuevo
archivo HTML para practicar.

Paso 1: Agrega un contenedor del DOM al HTML

Para iniciar, abre la página HTML que deseas editar. Agrega una etiqueta <div>
vacía para marcar el lugar donde deseas visualizar algo con React. Por ejemplo:

<div id="like_button_container"></div>

A este <div> le agregamos un atributo HTML id que es único. Esto nos permitirá
encontrarlo desde el código Javascript más adelante y visualizar un componente
de React adentro de este.

Paso 2: Agrega las etiquetas de script

Lo siguiente es agregar tres etiquetas <script> a la página HTML justo antes de
cerrar la etiqueta </body>:

  <!-- Cargar React. -->
  <!-- Nota: cuando se despliegue, reemplazar "development.js" con "production.min.js". -->
  <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>  <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
  <!-- Cargamos nuestro componente de React. -->
  <script src="like_button.js"></script>
</body>

Las primeras dos etiquetas cargan React. La tercera carga tu código del
componente.

Paso 3: Crea un componente de React

Crea un archivo llamado like_button.js en el mismo lugar donde tienes tu archivo
HTML y le agregas lo siguiente

'use strict';

const e = React.createElement;

class LikeButton extends React.Component {
  constructor(props) {
    super(props);
    this.state = { liked: false };
  }

  render() {
    if (this.state.liked) {
      return 'You liked this.';
    }

    return e(
      'button',
      { onClick: () => this.setState({ liked: true }) },
      'Like'
    );
  }
}

const domContainer = document.querySelector('#like_button_container');
ReactDOM.render(e(LikeButton), domContainer);

Estas dos líneas de código finales encuentran el <div> que agregamos en nuestro
HTML en el primer paso y muestran el componente de React para nuestro botón de
“Like” dentro del mismo.

¡Eso es todo!

No hay un cuarto paso. Ya agregaste tu primer componente de React a tu sitio
web.

El ejemplo completo sería:

<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Add React in One Minute</title>
  </head>
  <body>

    <h2>Add React in One Minute</h2>
    <p>This page demonstrates using React with no build tooling.</p>
    <p>React is loaded as a script tag.</p>

    <!-- We will put our React component inside this div. -->
    <div id="like_button_container"></div>

    <!-- Load React. -->
    <!-- Note: when deploying, replace "development.js" with "production.min.js". -->
    <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>

    <!-- Load our React component. -->
    <script src="like_button.js"></script>

  </body>
</html>

y

'use strict';

const e = React.createElement;

class LikeButton extends React.Component {
  constructor(props) {
    super(props);
    this.state = { liked: false };
  }

  render() {
    if (this.state.liked) {
      return 'You liked this.';
    }

    return e(
      'button',
      { onClick: () => this.setState({ liked: true }) },
      'Like'
    );
  }
}

const domContainer = document.querySelector('#like_button_container');
ReactDOM.render(e(LikeButton), domContainer);

Si consultamos index.html con el navegador y todo está correcto, debemos ver un
botón que al darle click cambiara a un texto sin recargar la página.

===========
Instalación
===========

1) Comprovar que tenemos node instalado:

$ node -v

2) Usar el siguiente comando para crear nuestra primera aplicación:

$ npx create-react-app my-app

npx lo que permite es instalar un modulo de npm forma global pero temporal, es
decir, lo va a descargar, lo va a instalar y luego lo va a borrar para que no
se quede ocupando espacio en disco. Es una herramienta de ejecución de paquetes
que viene con npm 5.2+.

Create React App no se encarga de la lógica de backend o de bases de datos; tan
solo crea un flujo de construcción para frontend, de manera que lo puedes usar
con cualquier backend. Para ello internamente usa Babel y webpack, pero no
necesitas saber nada de estas herramientas para usar Create React App.

-Babel es un compilador de JavaScript.

-webpack es un paquete de módulos de JavaScript de código abierto. Está hecho
principalmente para JavaScript, pero puede transformar activos de front-end como
HTML, CSS e imágenes si se incluyen los loaders correspondientes.  webpack toma
módulos con dependencias y genera archivos estáticos que representan esos
módulos.

Luego de crear la aplicación e instalar las dependencias, la consola nos
responde con los siguientes comandos que podemos ejecutar

Iniciar el servidor de desarrollo.

$ npm start

-----

Agrupa la aplicación en archivos estáticos para producción. 

$ npm run build

-----

Iniciar pruebas de la aplicación

$ npm test

-----

Elimina esta herramienta y copia las dependencias de compilación, los archivos
de configuración y los scripts en el directorio de la aplicación. Si haces esto,
¡no podrás volver!

$ npm run eject

======================================
Probar la instalación de la aplicación
======================================

Iniciar el servidor de desarrollo.

$ npm start

You can now view my-app in the browser.

  Local:            http://localhost:3000
  On Your Network:  http://192.168.1.102:3000

Note that the development build is not optimized.
To create a production build, use npm run build.

Nos levanta el servidor en la dirección localhost:3000 y si la visitamos nos
debe salir el logo de react y el mensaje:

Edit src/App.js and save to reload.

Lo cual nos indica que editando ese archivo cambiaremos el contenido de la
página principal.

=========================
Estructura de un proyecto
=========================

node_modules

package.json

package-lock.json

public:
    favicon.ico
    index.html
    logo192.png
    logo512.png
    manifest.json
    robots.txt

README.md

src
    App.css
    App.js
    App.test.js
    index.css
    index.js
    logo.svg
    reportWebVitals.js
    setupTests.js

index.html que es la plantilla de la single web aplication, contiene un div con
el id root, que es el que vamos a usar para insertar todo el código que vamos a
generar con React.

================
Primera práctica
================

Eliminamos todo el contenido de la carpeta src, luego creamos un fichero
index.js y le agregamos lo siguiente:

Importamos react y react-dom que ya están instalados, solo hay que llamarlos
para usarlos.

-----

import React from 'react';
import ReactDOM from 'react-dom';

-----

Al disponer de ellas ya podemos usar jsx, que es un lenguaje que en primera
instancia puede parecer que es html, pero no lo es, es JavaScript.

Presentando JSX
===============

Considera la declaración de esta variable:

const element = <h1>Hello, world!</h1>;

Esta curiosa sintaxis de etiquetas no es ni un string ni HTML.

Se llama JSX, y es una extensión de la sintaxis de JavaScript. Recomendamos
usarlo con React para describir cómo debería ser la interfaz de usuario. JSX
puede recordarte a un lenguaje de plantillas, pero viene con todo el poder de
JavaScript.

JSX produce “elementos” de React. Exploraremos como renderizarlos en el DOM en
la siguiente sección. A continuación puedes encontrar lo básico de JSX que será
necesario para empezar.

Continuando con el ejemplo, ahora, en index.js usaremos ReactDOM.render, el
método render que nos permite renderizar en el html todos los componentes que
hagamos.

Vamos a renderizar un div que diga Hola mundo!, además de este div, render
recibe otra propiedad o elemento que es el div o el elemento al que queremos
embeberlo, que seria id root.

Quedando así index.js:

-----

import React from 'react';
import ReactDOM from 'react-dom';

ReactDOM.render(<div>Hola mundo!</div>, document.getElementById('root'));

-----

Si corremos el servidor y visitamos la url nos debería mostrar nuestro
Hola mundo!.

Lo siguiente sera crear un componente que contenga la aplicación. El index.js
se deja con el React DOM y el render y otras propiedades más avanzadas y se
crea un componente aparte llamado App.

Entonces vamos a crear un nuevo componente que va a ser App.jsx, puede llamarse
App.js pero con jsx indicamos que es un componente de React.

En este archivo creado vamos a importar a react y vamos a exportar una función
App que va a devolver un código fuente.

Ahora nos vamos al index.js y vamos a importar a App y en el reder, en vez de
pasarle el hola mundo le vamos a pasar nuestro componente.

-----

App.jsx

import React from 'react'

export function App() {
  return <div>Hola mundo!!!</div>;
}

-----

y index.js

import React from 'react';
import ReactDOM from 'react-dom';
import { App } from ./App;

ReactDOM.render(< App />, document.getElementById('root'));

-----

Como se ve < App /> luce como un elemento html con la diferencia de que al ser
un componente creado por nosotros, la primera letra siempre será en mayúscula
para que tanto como Reac como nosotros lo reconozcan como un componente.

JSX representa objetos
======================

Babel compila JSX a llamadas de React.createElement().

Estos dos ejemplos son idénticos:

const element = (
  <h1 className="greeting">
    Hello, world!
  </h1>
);

const element = React.createElement(
  'h1',
  {className: 'greeting'},
  'Hello, world!'
);

React.createElement() realiza algunas comprobaciones para ayudarte a escribir código libre de errores, pero, en esencia crea un objeto como este:

// Nota: Esta estructura está simplificada
const element = {
  type: 'h1',
  props: {
    className: 'greeting',
    children: 'Hello, world!'
  }
};

Estos objetos son llamados “Elementos de React”. Puedes pensar en ellos como descripciones de lo que quieres ver en pantalla. React lee estos objetos y los usa para construir el DOM y mantenerlo actualizado.

===================================
Llamar un archivo css en un pryecto
===================================

Creamos un archivo css, como main.css por ejemplo:

-----

body {
  background-color: gray;
}

-----

y lo llamamos dede index.js tal que:

-----

import React from 'react';
import ReactDOM from 'react-dom';
import { App } from "./App";
import './main.css';

ReactDOM.render(< App />, document.getElementById('root'));

================
Ejemplo de props
================

Conceptualmente, los componentes son como las funciones de JavaScript. Aceptan
entradas arbitrarias (llamadas “props”) y devuelven a React elementos que
describen lo que debe aparecer en la pantalla.

Componentes funcionales y de clase
==================================

La forma más sencilla de definir un componente es escribir una función de
JavaScript:

Welcome.jsx

import React from 'react'

export function Welcome(props) {
  return <h1>Hello, {props.name}</h1>;
}

Esta función es un componente de React válido porque acepta un solo argumento de
objeto “props” (que proviene de propiedades) con datos y devuelve un elemento de
React. Llamamos a dichos componentes “funcionales” porque literalmente son
funciones JavaScript.

Renderizando un componente con props
====================================

index.js

import React from 'react';
import ReactDOM from 'react-dom';
import { Welcome } from "./Welcome";

const element = <Welcome name="Sara" />;
ReactDOM.render(element, document.getElementById('welcome')
);

-----

o directamente:

-----

index.js

import React from 'react';
import ReactDOM from 'react-dom';
import { Welcome } from "./Welcome";

ReactDOM.render(<Welcome name="Sara" />, document.getElementById('welcome')
);

-----

Si revisamos el navegador debemos ver un:

Hello, Sara

Renderizando dos componente con props
=====================================

index.html

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="Web site created using create-react-app"
    />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <title>React App</title>
  </head>
  <body>
    <h1>
      Hello my name is <span id="name"></span> and my last name is <span id="last_name"></span>
    </h1>
  </body>
</html>

-----

index.js

import React from 'react';
import ReactDOM from 'react-dom';
import { Name } from "./components/Name";
import { Last_name } from "./components/Last_name";
import './css/main.css';

ReactDOM.render(<Name name="Sarah" />, document.getElementById('name'));
ReactDOM.render(<Last_name last_name="Connor" />, document.getElementById('last_name'));

-----

Name.jsx

import React from 'react'

export function Name(props) {
  return <span>{props.name}</span>;
}

-----

Last_name.jsx

import React from 'react'

export function Last_name(props) {
  return <span>{props.last_name}</span>;
}

-----

Si revisamos el navegador debemos ver un:


Hello my name is Sarah and my last name is Connor

Otro ejemplo más avanzado con props
===================================

index.html

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="Web site created using create-react-app"
    />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <title>React App</title>
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>

-----

index.js

import React from 'react';
import ReactDOM from 'react-dom';
import { App } from "./components/App";
import { Table } from "./components/Table";
import './css/main.css';

const comment = {
  date: new Date(),
  text: 'I hope you enjoy learning React!',
  author: {
    name: 'Oliver Bierhoff',
    avatarUrl: 'https://placekitten.com/g/64/64',
  },
};

ReactDOM.render(
  <App
    date={comment.date}
    text={comment.text}
    author={comment.author}
  />,
  document.getElementById('root')
);

-----

App.jsx

import React from 'react'

function formatDate(date) {
  return date.toLocaleDateString();
}

export function Example(props) {
  return (
    <div>
      <div>
        <img src={props.author.avatarUrl} alt={props.author.name} />
        <div>
          -Name: {props.author.name}
        </div>
      </div>
      <div>
        -Comment: {props.text}
      </div>
      <div>
        -Date: {formatDate(props.date)}
      </div>
    </div>
  );
}

Composición de componentes
==========================

Los componentes pueden referirse a otros componentes en su salida. Esto nos
permite utilizar la misma abstracción de componente para cualquier nivel de
detalle. Un botón, un cuadro de diálogo, un formulario, una pantalla: en
aplicaciones de React, todos son expresados comúnmente como componentes.

Por ejemplo, podemos crear un componente App que renderiza Name muchas veces:

import React from 'react';
import ReactDOM from 'react-dom';
import { Name } from "./components/Name";
import './css/main.css';

function App() {
  return (
    <div>
      <Name name="Sara" />
      <Name name="Cahal" />
      <Name name="Edite" />
     </div>
  );
}

ReactDOM.render(<App />, document.getElementById('name'));

====================================
Actualizando el elemento renderizado
====================================

Los elementos de React son inmutables. Una vez creas un elemento, no puedes
cambiar sus hijos o atributos. Un elemento es como un fotograma solitario en una
película: este representa la interfaz de usuario en cierto punto en el tiempo.

Con nuestro conocimiento hasta este punto, la única manera de actualizar la
interfaz de usuario es creando un nuevo elemento, y pasarlo a ReactDOM.render().

Considera este ejemplo de un reloj en marcha:

function tick() {
  const element = (
    <div>
      <h1>Hello, world!</h1>
      <h2>It is {new Date().toLocaleTimeString()}.</h2>
    </div>
  );
  ReactDOM.render(element, document.getElementById('root'));}

setInterval(tick, 1000);

Si vemos el navegador deberíamos ver:

It is 7:36:31 p. m..

=================
Manejando eventos
=================

Manejar eventos en elementos de React es muy similar a manejar eventos con
elementos del DOM. Hay algunas diferencias de sintaxis:

Los eventos de React se nombran usando camelCase, en vez de minúsculas.

Con JSX pasas una función como el manejador del evento, en vez de un string.

Por ejemplo, el HTML:

<button onclick="activateLasers()">
  Activate Lasers
</button>

En React es algo diferente:

<button onClick={activateLasers}>
  Activate Lasers
</button>

Otra diferencia es que en React no puedes retornar false para prevenir el
comportamiento por defecto. Debes, explícitamente, llamar preventDefault. Por
ejemplo, en un HTML plano, para prevenir el comportamiento por defecto de un
enlace de abrir una nueva página, puedes escribir:

<a href="#" onclick="console.log('The link was clicked.'); return false">
  Click me
</a>

En cambio en React, esto podría ser:

function ActionLink() {
  function handleClick(e) {
    e.preventDefault();
    alert('The link was clicked.');
  }
  return (
    <a href="#" onClick={handleClick}>
      Click me
    </a>
  );
}

========================
Exportando un componente
========================

Para exportar un componente se puede hacer de la siguiente manera para funciones
y clases:

export function Example() {
  return (
  );
}

ó

export class Example extends React.Component {
  render() {
    return (
    );
  }
}

========================================================
Ejemplo con un Toggle para cambiar el estado de un botón
========================================================

Cuando estás utilizando React, generalmente no necesitas llamar addEventListener
para agregar escuchadores de eventos a un elemento del DOM después de que este
es creado. En cambio, solo debes proveer un manejador de eventos cuando el
elemento se renderiza inicialmente.

Cuando defines un componente usando una clase de ES6, un patrón muy común es que
los manejadores de eventos sean un método de la clase. Por ejemplo, este
componente Toggle renderiza un botón que permite al usuario cambiar el estado
entre “ENCENDIDO” y “APAGADO”:

class Toggle extends React.Component {
  constructor(props) {
    super(props);
    this.state = {isToggleOn: true};

    // Este enlace es necesario para hacer que `this` funcione en el callback.
    this.handleClick = this.handleClick.bind(this);
  }

  handleClick() {
    // Se usa this.setState() para programar actualizaciones al estado local del
    // componente.
    this.setState(state => ({
    isToggleOn: !state.isToggleOn
    }));
  }
  render() {
    return (
      <button onClick={this.handleClick}>
        {this.state.isToggleOn ? 'ON' : 'OFF'}
      </button>
    );
  }
}

ReactDOM.render(
  <Toggle />,
  document.getElementById('root')
);

Tienes que tener mucho cuidado en cuanto al significado de this en los callbacks
de JSX. En JavaScript, los métodos de clase no están ligados por defecto. Si
olvidas ligar this.handleClick y lo pasas a onClick, this será undefined cuando
se llame la función.

Esto no es un comportamiento especifico de React; esto hace parte de como operan
las funciones JavaScript. Generalmente, si refieres un método sin usar ()
después de este, tal como onClick={this.handleClick}, deberías ligar ese método.